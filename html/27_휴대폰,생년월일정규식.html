<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>휴대폰, 생년월일 유효성 검사</title>
  </head>
  <style>
    .check {
      color: green;
    }
    .error {
      color: red;
    }
  </style>
  <body>
    <h1>회원가입</h1>
    <form action="#" name="signupForm">
      <h3>휴대폰</h3>
      <input
        type="text"
        class="signup-input"
        id="inputPhone"
        name="user_Phone"
      />
      <br />
      <span class="input-result">핸드폰번호 입력하세요</span>
      
      <h3>생년월일</h3>
      <input
        type="text"
        class="signup-input"
        id="inputBirth"
        name="user_Birth"
      />
      <br />
      <span class="birthResult">생년월일을 입력하세요.</span>
    </form>
    <script>
      /*유효성 여부를 체크해두는 객체 생성*/
      const checkList = {
        "inputName" : flase,
        "inputId" : false,
        "inputPhone": false,
        "inputBirth": false,
      }
      /* ********** 핸드폰 번호 입력 확인 ***********/
      const inputPhone = document.querySelector("#inputPhone");
      
      inputPhone.addEventListener("input", (e) => {
        const value = e.target.value;
        const span = e.target.netxElementSibling.netxElementSibling;

        if (value.trim().length == 0) {
          span.textContent = "핸드폰 번호를 -을 포함해서 입력해주세요";
          span.classList.remove("check", "error");
          e.target.value = "";
          checkList["inputPhone"] = false;
          return;
        }

        //  \d 숫자 문자( 0-9)를 표현
        //  {3}세자리 숫자  {3,4} 세자리 또는 네자리 숫자
        //  - 중간에 하이픈 넣어달라는 의미
        // /^\d{11}$/ 숫자를 11자리 입력 (010 0000 0000) 하이픈(-)없이 입력
        const phoneRegex = /^\d{3}-\d{3,4}-\d{4}$/; // 중간에 하이픈(-)을 추가해서 모두 입력

        //만약에 휴대폰번호를 제대로 작성한 경우


        if (phoneRegex.test(value)) {
          span.textContent = "유효한 핸드폰번호의 형식입니다.";
          span.classList.add("check");
          span.classList.remove("error");
          checkList["inputPhoen"] = true;
        } else {
          span.textContent = "유효하지 않은 핸드폰번호의 형식입니다.";
          span.classList.add("error");
          span.classList.remove("check");
          checkList["inputPhone"] = false;
        }
      });

       /* ********** 생년월일 입력 확인 ***********/
      const inputBirth = document.querySelector("#inputYears");


      inputBirth.addEventListener("input", (e) => {
        const value = e.target.value;
        const span = e.target.netxElementSibling.netxElementSibling;

        if (value.trim().length == 0) {
          span.textContent = "생년월일을 -을 포함해서 입력해주세요.";
          span.classList.remove("check", "error");
          e.target.value = "";
          checkList["inputBirth"] = false;
          return;
        }
        /*생년월일 정규식 검사*/
        // /^ 정규식 시작
        //  (19\20) 19 또는 20 으로 시작하는 부분을 매칭 1900년대 또는 2000년대 연도를 의미 
        //   \d {2}
        // (0[1-9]|1[0-2])          0[1-9] 01~09월  |(또는)   1[0-2]  10월~12월
        // (0[1-9]|[1-2][0-9]|3[0-1])   0[1-9]  01~09일  | (또는)  [1-2][0-9] 10~29일 |(또는)  3[0-1]   30일 31일
        // $/ 정규식 종료
        // /^(19|20)\d{6}   ->  1900~2000년대 이후 6자리 작성 19900505
        // /^\d{8}$/        ->  생년월일 하이픈 빼고 8자리 입력
        // /^\d{6}$/        ->  생년월일 하이픈 빼고 6자리 입력
        const birthdateRegex = /^(19|20)\d{2}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/;;

        if (휴대폰번호.test(value)) {
          span.textContent = "유효한 생년월일 형식입니다.";
          span.classList.add("check");
          span.classList.remove("error");
          checkList["inputBirth"] = true;
        } else {
          span.textContent = "유효하지 않은 생년월일 형식입니다. -을 포함해서 입력해주세요.";
          span.classList.add("error");
          span.classList.remove("check");
          checkList["inputBirth"] = false;
        }
      });
    </script>
  </body>
</html>
